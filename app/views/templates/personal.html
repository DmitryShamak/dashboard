<div class="clearfix">
    <div class="page-group-wrapper text-center">
        <h5>
            <span ng-bind=" 'your_feeds_for' | translate : lang"></span>
            <span class="text-bigger text-marked" ng-bind="now"></span>
        </h5>

        <div ng-if="feeds && feeds.lastUpdate">
            <div class="feeds-filters">
                <div class="filter-title pointer text-center" ng-class="{'disabled': feeds.busy}" ng-click="toggleFilterEdit();">
                    <span class="text-marked" ng-bind="feeds.filter.status.label | translate : lang"></span>
                    <span><small ng-bind="'for' | translate : lang"></small></span>
                    <span class="text-marked" ng-bind="feeds.filter.range.label | translate : lang"></span>
                </div>
                <div class="filter-edit text-center" ng-if="filterEdit">
                    <i class="filter-edit-caret fa fa-caret-up"></i>
                    <div class="filter-edit-content">
                        <i class="filter-edit-close fa fa-times-circle pointer" ng-click="toggleFilterEdit();"></i>
                        <div filter-group="dateRanges" filter-type="range" on-select="setFilter"></div>
                    </div>
                </div>
            </div>
            <h5>
                <small>{{'last_update' | translate : lang}}: </small>
                <small ng-bind="feeds.lastUpdate.label"></small>

                <small class="text-marked pointer" ng-click="checkUpdates();" ng-bind="'refresh' | translate : lang"></small>
            </h5>
        </div>
    </div>
    <div class="page-group-wrapper text-center" ng-hide="feeds.busy || feeds.data && feeds.data.length">
        <h5 ng-bind="'seems_like_you_do_not_have_any_feeds' | translate : lang"></h5>
        <a ui-sref="profile" ng-bind="'go_to_profile_page' | translate : lang"></a>
    </div>
    <p class="form-group alert alert-info" ng-show="feeds.busy">
        <i class="fa fa-refresh fa-pulse"></i>
        <span ng-bind=" 'in_progress' | translate : lang"></span>
    </p>
    <div class="feeds-wrapper" ng-class="{'disabled': feeds && feeds.busy}">
        <div class="feed" ng-repeat="group in feeds.data track by $index">
            <div class="feed-header pointer" ng-click="toggleGroup(group);">
                <h5>
                    <span ng-hide="group.busy" class="feed-count text-marked text-medium"  ng-bind="group.unreadCount"></span>
                    <span ng-show="group.busy" class="feed-count text-marked text-medium fa fa-refresh fa-pulse"></span>
                    <small>/ {{group.content.length}}</small>
                    <span ng-bind="group.label"></span>
                </h5>
                <div class="btn feed-btn">
                    <i class="fa" ng-class="{'fa-angle-up': group.active, 'fa-angle-down': !group.active}"></i>
                </div>
            </div>
            <div class="feed-content clearfix" ng-class="{'disabled': group.busy}" ng-show="group.active">
                <div class="col-xs-12">
                    <div class="col-xs-12 col-sm-6 col-lg-4" ng-repeat="item in group.content track by $index">
                        <div class="feed-item" ng-class="{'visited': item.visited}">
                            <div class="feed-status">
                                <i class="visited fa fa-eye" title="visited" ng-show="item.visited"></i>
                            </div>
                            <a class="feed-link" ng-click="addToHistory(group, item);" ng-href="{{item.link}}" target="_blank" title="Go to source">
                                <i class="fa fa-external-link-square"></i>
                            </a>
                            <div class="feed-item-content pointer" ng-click="openFeed(group, $index);">
                                <div class="feed-image" ng-style="{'background-image': 'url('+ (item.image || defaultImage) +')'}"></div>
                                <h6 class="feed-label text-bold" ng-bind="item.label"></h6>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 feed-footer">
                    <div class="btn close-feed-block pointer" ng-click="toggleGroup(group);">
                        <i class="fa fa-angle-up"></i>
                        <span>close group</span>
                    </div>
                    <div class="btn  pointer" ng-show="group.unreadCount" ng-click="markAllAsRead(group, group.content);">
                        <i class="fa fa-eye"></i>
                        <span>mark all as read</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>